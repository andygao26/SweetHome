@model IEnumerable<FifthGroup_Backstage.Models.Application>

@{
    ViewData["Title"] = "ActivePublic";
}






<!-- Content wrapper -->
<div class="content-wrapper">
    <div class="container-fluid page-header fadeIn">
        <div class="container text-center py-2">
            <h1 class="display-3 text-dark animated slideInDown">社區公共活動</h1>
            <nav aria-label="breadcrumb animated slideInDown">
                <ol class="breadcrumb justify-content-center mb-0">
                    <li class="breadcrumb-item"><a asp-area="" asp-controller="Active" asp-action="ActiveCreate">申請活動</a></li>
                    <li class="breadcrumb-item  text-dark" aria-current=" page">社區活動</li>
                </ol>
            </nav>
        </div>
    </div>
    <div class="card-body">
        <div class="container mb-5">
            <div class="card m-3 ">
                <div class="table-responsive text-nowrap">
                    <table class="table" style="text-align: center; vertical-align: middle;">
                        <thead class="table-dark">
                            <tr>
                                <th>
                                    活動名稱
                                </th>
                                <th>
                                    活動類型
                                </th>
                                <th>
                                    開始時間 ~ 結束時間
                                </th>
                                <th>
                                    人數情況
                                </th>
                                <th>
                                    審核狀態
                                </th>
                                <th>
                                    操作
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>

                                    <td>
                                        @Html.DisplayFor(modelItem => item.ActivityName)
                                    </td>

                                    <td>
                                        @Html.DisplayFor(modelItem => item.Activities)
                                    </td>
                                    <td>
                                        @item.DateStart.ToString("yyyy/MM/dd") ~ @item.DateEnd.ToString("yyyy/MM/dd")
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Applicants) 人/ @Html.DisplayFor(modelItem => item.MaxApplicants) 人
                                    </td>
                                    <td style="text-align: center; vertical-align: middle;">
                                        @{
                                            string stateText = "";
                                            switch (item.State)
                                            {
                                                case 0:
                                                    stateText = "未審核";
                                                    break;
                                                case 1:
                                                    stateText = "申請中";
                                                    break;
                                                case 2:
                                                    stateText = "已通過";
                                                    break;
                                                case 3:
                                                    stateText = "未通過";
                                                    break;
                                            }
                                        }
                                        <span class="badge bg-label-primary me-1" style="font-size:16px">
                                            @stateText
                                        </span>
                                    </td>
                                    <td>
                                        @if (item.DateStart > DateTime.Now)
                                        {
                                            <a asp-action="ActiveEdit" asp-route-id="@item.ApplyCode" asp-route-returnUrl="ActivePublic">查看編輯</a>
                                            <a> |</a>
                                            <a asp-action="ActiveDelete" asp-route-id="@item.ApplyCode">刪除資料</a>
                                        }
                                        else
                                        {
                                            <a asp-action="ActiveDetails" asp-route-id="@item.ApplyCode" asp-route-returnUrl="ActivePublic">查看資料</a>
                                            <a> | 刪除資料</a>
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- 分頁 -->
        <div class="text-center mt-4">
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    @for (int i = 1; i <= Math.Ceiling((double)ViewBag.TotalCount / ViewBag.PageSize); i++)
                    {
                        <li class="page-item @(i == ViewBag.Page ? "active" : "")">
                            <a class="page-link" href="@Url.Action("ActiveList", new { page = i })">@i</a>
                        </li>
                    }
                </ul>
            </nav>
        </div>
    </div>

    </div>



       








